!function(){angular.module("forumApp",["forumApp.controllers","forumApp.services","ngRoute","angularUtils.directives.dirPagination","angularMoment"]),angular.module("forumApp.controllers",[]),angular.module("forumApp").run(["$rootScope","$http","$window",function(t,o,e){o.get("/user").success(function(o){t.currentUser=o})}]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"partials/post-list.html",controller:"PostListCtrl"}).when("/submit",{templateUrl:"partials/post-submit.html",controller:"PostSubmitCtrl"}).when("/posts/:postId",{templateUrl:"partials/post-show.html",controller:"PostShowCtrl"}).when("/comments/:commentId",{templateUrl:"partials/comment-show.html",controller:"CommentShowCtrl"}).when("/users/:userId",{templateUrl:"partials/user-profile.html",controller:"UserProfileCtrl"}).when("/users/:userId/posts",{templateUrl:"partials/user-posts.html",controller:"UserPostsCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){function t(t){return{get:function(o){return t.get(o)},post:function(o,e){return t.post(o,e)}}}function o(t){var o="/posts/";return{getPosts:function(){return t.get(o)},getPost:function(e){return t.get(o+e)},submitPost:function(e){return t.post(o+"submit",e)},submitComment:function(e,n){return t.post(o+e+"/comment",n)},upvote:function(e){return t.post(o+e+"/upvote")}}}function e(t){var o="/comments/";return{getComment:function(e){return t.get(o+e)},submitReply:function(e,n){return t.post(o+e+"/reply",n)}}}function n(t){var o="/users/";return{getUser:function(e){return t.get(o+e)},getPosts:function(e){return t.get(o+e+"/posts")},updateUser:function(e,n){return t.post(o+e+"/update",n)}}}angular.module("forumApp.services",[]).factory("Api",["$http",t]).factory("Post",["Api",o]).factory("Comment",["Api",e]).factory("User",["Api",n])}(),function(){function t(t,o,e,n,r,s){function u(o){s.getComment(o).success(function(o){t.comment=o,t.reply.PostId=o.PostId})["catch"](function(t){e.url("/")})}function c(){s.submitReply(r.commentId,t.reply).success(function(){t.reply.content="",e.url("/posts/"+t.reply.PostId)})["catch"](function(o){t.message=o.data})}o.currentUser||(n.location.href="login"),t.reply={content:"",PostId:void 0},t.submitReply=c,u(r.commentId)}angular.module("forumApp.controllers").controller("CommentShowCtrl",["$scope","$rootScope","$location","$window","$routeParams","Comment",t])}(),function(){function t(t,o,e,n,r){function s(){r.getPosts().success(function(o){var e=document.createElement("a");o.forEach(function(t){t.url&&(e.href=t.url,t.hostname=e.hostname)}),t.posts=o})}function u(t){o.currentUser||(n.location.href="login"),r.upvote(t).success(function(){e.url("/")})["catch"](function(t){console.log(t)})}t.posts=[],t.upvote=u,s()}angular.module("forumApp.controllers").controller("PostListCtrl",["$scope","$rootScope","$location","$window","Post",t])}(),function(){function t(t,o,e,n,r){function s(o){r.getPost(o).success(function(o){if(t.post=o.post,t.comments=o.comments,t.post.url){var e=document.createElement("a");e.href=t.post.url,t.post.hostname=e.hostname}})["catch"](function(t){e.url("/")})}function u(){r.submitComment(n.postId,t.comment).success(function(e){e.User=o.currentUser,t.comments.push(e),t.message="comment posted",t.comment.content=""})["catch"](function(o){t.message=o.data})}t.comments=[],t.post={},t.comment={content:""},t.message="",t.submitComment=u,s(n.postId)}angular.module("forumApp.controllers").controller("PostShowCtrl",["$scope","$rootScope","$location","$routeParams","Post",t])}(),function(){function t(t,o,e,n,r){function s(){r.submitPost(t.post).success(function(t){e.url("/posts/"+t.id)})["catch"](function(o){t.message=o.data})}o.currentUser||(n.location.href="login"),t.message="",t.submitPost=s}angular.module("forumApp.controllers").controller("PostSubmitCtrl",["$scope","$rootScope","$location","$window","Post",t])}(),function(){function t(t,o,e,n,r,s,u){function c(o){s.getPosts(o).success(function(o){t.posts=o})["catch"](function(t){e.url("/")})}function l(r){o.currentUser||(n.location.href="login"),u.upvote(r).success(function(){e.url("/users/"+t.userId+"/posts")})["catch"](function(t){console.log(t)})}t.posts=[],t.upvote=l,t.userId=r.userId,c(r.userId)}angular.module("forumApp.controllers").controller("UserPostsCtrl",["$scope","$rootScope","$location","$window","$routeParams","User","Post",t])}(),function(){function t(t,o,e,n){function r(e){n.getUser(e).success(function(o){t.user=o})["catch"](function(t){o.url("/")})}function s(){n.updateUser(e.userId,t.user).success(function(o){t.message="bio updated"})["catch"](function(o){t.message=o.data})}t.user={},t.message="",t.updateUser=s,r(e.userId)}angular.module("forumApp.controllers").controller("UserProfileCtrl",["$scope","$location","$routeParams","User",t])}();